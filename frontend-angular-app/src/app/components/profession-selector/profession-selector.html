<div class="profession-selector-container">
    <mat-card class="selector-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon class="header-icon">work_outline</mat-icon>
          Choose Future Profession
        </mat-card-title>
        <mat-card-subtitle>Select what your child could become in the future</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <!-- Search Bar -->
        <div class="search-container">
          <mat-form-field appearance="outline" class="search-field">
            <mat-label>Search professions...</mat-label>
            <input 
              matInput 
              name="searchQuery"
              [(ngModel)]="searchQuery" 
              (ngModelChange)="onSearchChange($event)"
              placeholder="Type to search">
            <mat-icon matPrefix>search</mat-icon>
            <button 
              *ngIf="searchQuery" 
              matSuffix 
              mat-icon-button 
              (click)="clearSearch()">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
        </div>
        
        <!-- Profession Grid -->
        <div class="profession-grid" *ngIf="filteredProfessions.length > 0">
          <div 
            *ngFor="let profession of filteredProfessions"
            class="profession-card"
            [class.selected]="selectedProfession === profession.id"
            (click)="selectProfession(profession.id)"
            [matTooltip]="profession.description"
            matTooltipPosition="above">
            
            <div class="profession-icon-container">
              <mat-icon class="profession-icon">{{ profession.icon }}</mat-icon>
              <div class="selection-indicator" *ngIf="selectedProfession === profession.id">
                <mat-icon>check_circle</mat-icon>
              </div>
            </div>
            
            <h4 class="profession-name">{{ profession.name }}</h4>
            <p class="profession-desc">{{ profession.description }}</p>
            
            <div class="profession-footer">
              <span class="profession-badge">Select</span>
            </div>
          </div>
        </div>
        
        <!-- No Results -->
        <div *ngIf="filteredProfessions.length === 0" class="no-results">
          <mat-icon>search_off</mat-icon>
          <h3>No professions found</h3>
          <p>Try a different search term</p>
          <button mat-button color="primary" (click)="clearSearch()">
            Show all professions
          </button>
        </div>
        
        <!-- Selected Profession Details -->
        <div *ngIf="selectedProfessionData" class="selected-profession-details">
          <mat-divider></mat-divider>
          
          <div class="details-header">
            <h3>Selected Profession</h3>
            <div class="selected-tag">
              <mat-icon>check_circle</mat-icon>
              <span>Selected</span>
            </div>
          </div>
          
          <div class="details-content">
            <div class="details-icon">
              <mat-icon>{{ selectedProfessionData!.icon }}</mat-icon>
            </div>
            <div class="details-text">
              <h4>{{ selectedProfessionData!.name }}</h4>
              <p>{{ selectedProfessionData!.description }}</p>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
</div>
        
        <!-- Age Selector -->
        <div class="age-selector-wrapper">
          
          <!-- Modern Card Design -->
          <mat-card class="age-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>schedule</mat-icon>
                Target Age Selection
              </mat-card-title>
              <mat-card-subtitle>Choose the age for the adult version</mat-card-subtitle>
            </mat-card-header>
            
            <mat-card-content>
              <!-- Current Age Display -->
              <div class="current-age-section">
                <div class="age-badge">
                  <span class="age-number">{{ targetAge }}</span>
                  <span class="age-unit">years</span>
                </div>
                <div class="age-hint">Drag the slider or click quick ages</div>
              </div>
              
              <!-- Custom Styled Slider -->
              <div class="slider-wrapper">
                <mat-slider
                  class="custom-slider"
                  min="20"
                  max="60"
                  step="5"
                  [attr.value]="targetAge"
                  (input)="onSliderInput($event)"
                  (change)="onSliderChange($event)"
                  thumbLabel
                  tickInterval="5">
                  <input matSliderThumb>
                </mat-slider>
                
                <!-- Age Labels -->
                <div class="age-markers">
                  <div class="marker" *ngFor="let marker of ageMarkers">
                    <div class="marker-line"></div>
                    <span class="marker-label">{{ marker }}</span>
                  </div>
                </div>
              </div>
              
              <!-- Quick Selection -->
              <div class="quick-selection-section">
                <h4>Quick Selection</h4>
                <div class="quick-age-grid">
                  <button 
                    *ngFor="let age of quickAges"
                    mat-raised-button
                    [class]="'quick-age-btn ' + (targetAge === age ? 'selected' : '')"
                    (click)="selectQuickAge(age)">
                    <span class="age-icon">{{ targetAge === age ? 'âœ“' : '' }}</span>
                    {{ age }}
                  </button>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      